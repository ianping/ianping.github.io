import{_ as i,c as e,b as a,o as t}from"./app-DsGHT65_.js";const n="/assets/20240319150419-2JNeUbPI.png",l={};function p(r,s){return t(),e("div",null,s[0]||(s[0]=[a('<p>下载地址：https://www.postgresql.org/download/</p><p>版本：postgresql-16.1</p><h2 id="docker" tabindex="-1"><a class="header-anchor" href="#docker"><span>Docker</span></a></h2><p>1.拉取镜像</p><p><code>docker pull postgres:16</code></p><p>2.获取默认配置文件</p><p><code>docker run -i --rm postgres:16 cat /usr/share/postgresql/postgresql.conf.sample &gt; /docker/postgres16/conf/postgres.conf</code></p><p>3.创建容器</p><p><code>docker create --name postgres16 -p 5432:5432 -v /docker/postgres16/data:/var/lib/postgresql/data -v /docker/postgres16/conf/postgres.conf:/etc/postgresql/postgresql.conf -e POSTGRES_USER=postgres -e POSTGRES_PASSWORD=postgres postgres:16 -c &#39;config_file=/etc/postgresql/postgresql.conf&#39;</code></p><p>可选，设置pg随着docker自启动：</p><p><code>docker update postgres16 --restart=always</code></p><p>4.启动容器</p><p><code>docker start postgres16</code></p><p>4.验证</p><p><code>docker exec -it postgres16 psql -U postgres -W</code></p><p><img src="'+n+`" alt=""></p><p>远程连接报错:</p><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span>FATAL:  no pg_hba.conf entry for host &quot;x.x.x.x&quot;, user &quot;postgres&quot;, database &quot;postgres&quot;, no encryption</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>解决：在 data/pg_hba.conf 文件中，添加以下配置</p><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span>host all all all trust</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="linux" tabindex="-1"><a class="header-anchor" href="#linux"><span>Linux</span></a></h2><p><strong>Ubuntu</strong></p><p>https://www.postgresql.org/download/linux/ubuntu/</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;"># Import the repository signing key:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> curl</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> ca-certificates</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> /usr/share/postgresql-common/pgdg</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> /usr/share/postgresql-common/pgdg/apt.postgresql.org.asc</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> --fail</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> https://www.postgresql.org/media/keys/ACCC4CF8.asc</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;"># Create the repository configuration file:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">echo &quot;deb [signed-by=/usr/share/postgresql-common/pgdg/apt.postgresql.org.asc] https://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main&quot; &gt; /etc/apt/sources.list.d/pgdg.list</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;"># Update the package lists:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> update</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;"># Install the latest version of PostgreSQL:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;"># If you want a specific version, use &#39;postgresql-16&#39; or similar instead of &#39;postgresql&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> apt</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> postgresql</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>启动PG服务</p><p><code>systemctl start postgresql</code></p><p>psql登录</p><p><code>su postgres</code></p><p><code>psql</code></p><h2 id="windows" tabindex="-1"><a class="header-anchor" href="#windows"><span>Windows</span></a></h2><p>下载exe安装程序进行安装即可。</p><p>Navicat连接PG数据库报错：</p><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span>错误：字段&quot;datlastsysoid&quot;不存在</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>解决：升级Navicat版本到15.0.29+，需要重新激活许可证。</p><h2 id="macos" tabindex="-1"><a class="header-anchor" href="#macos"><span>MacOS</span></a></h2>`,35)]))}const o=i(l,[["render",p],["__file","index.html.vue"]]),h=JSON.parse('{"path":"/notes/database/ngio4cr2/","title":"postgresql安装","lang":"zh-CN","frontmatter":{"title":"postgresql安装","createTime":"2024/11/24 15:56:14","permalink":"/notes/database/ngio4cr2/"},"headers":[],"readingTime":{"minutes":0.99,"words":297},"git":{},"filePathRelative":"notes/database/3.postgresql/1.postgresql安装.md","bulletin":false}');export{o as comp,h as data};

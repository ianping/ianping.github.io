import{_ as i,c as a,b as n,o as e}from"./app-DsGHT65_.js";const l={};function t(h,s){return e(),a("div",null,s[0]||(s[0]=[n(`<h2 id="windows安装docker" tabindex="-1"><a class="header-anchor" href="#windows安装docker"><span>Windows安装docker</span></a></h2><p>参考：</p><ul><li><p>https://docs.docker.com/desktop/install/windows-install/</p></li><li><p>https://docs.docker.com/get-docker/</p></li></ul><h2 id="linux安装docker" tabindex="-1"><a class="header-anchor" href="#linux安装docker"><span>Linux安装docker</span></a></h2><h3 id="ubuntu" tabindex="-1"><a class="header-anchor" href="#ubuntu"><span>Ubuntu</span></a></h3><p>参考：https://docs.docker.com/engine/install/ubuntu/</p><p>1.卸载docker旧版本</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> pkg </span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">in</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> docker.io</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> docker-doc</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> docker-compose</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> docker-compose-v2</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> podman-docker</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> containerd</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> runc</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> do</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> remove</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> $pkg</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> done</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>2.配置docker repository</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;"># Add Docker&#39;s official GPG key:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> update</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> ca-certificates</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> curl</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> -m</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 0755</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> /etc/apt/keyrings</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> -fsSL</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> https://download.docker.com/linux/ubuntu/gpg</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> /etc/apt/keyrings/docker.asc</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> a+r</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> /etc/apt/keyrings/docker.asc</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;"># Add the repository to Apt sources:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#82AAFF;">echo</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">deb [arch=</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">dpkg</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> --print-architecture</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu </span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;">\\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">  $(</span><span style="--shiki-light:#005CC5;--shiki-dark:#82AAFF;">.</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> /etc/os-release </span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&amp;&amp;</span><span style="--shiki-light:#005CC5;--shiki-dark:#82AAFF;"> echo</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">$VERSION_CODENAME</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;)</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> stable</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">  sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> tee</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> /etc/apt/sources.list.d/docker.list</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> /dev/null</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> update</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.安装docker</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> docker-ce</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> docker-ce-cli</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> containerd.io</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> docker-buildx-plugin</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> docker-compose-plugin</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>4.验证</p><p><code>docker --version</code></p><h3 id="centos" tabindex="-1"><a class="header-anchor" href="#centos"><span>CentOS</span></a></h3><p>https://docs.docker.com/engine/install/centos/</p><p>可以使用rpm repository在线安装，这里选择rpm package离线安装的方式。</p><p>1.卸载旧版本</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">yum</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> remove</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> docker</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">          docker-client</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">          docker-client-latest</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">          docker-common</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">          docker-latest</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">          docker-latest-logrotate</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">          docker-logrotate</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">          docker-engine</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2.下载rpm安装包</p><p>https://download.docker.com/linux/centos/</p><p>3.依次安装rpm包</p><ul><li><code>yum install containerd.io-1.6.33-3.1.el7.x86_64.rpm</code></li><li><code>yum install docker-compose-plugin-2.6.0-3.el7.x86_64.rpm</code></li><li><code>yum install docker-buildx-plugin-0.14.1-1.el7.x86_64.rpm</code></li><li><code>yum install docker-ce-cli-26.1.4-1.el7.x86_64.rpm</code></li><li><code>yum install docker-ce-rootless-extras-26.1.4-1.el7.x86_64.rpm docker-ce-26.1.4-1.el7.x86_64.rpm</code></li><li><code>yum install docker-scan-plugin-0.9.0-3.el7.x86_64.rpm</code></li></ul><p>4.设置</p><ul><li><code>systemctl enable docker.service</code> 设置docker开机启动</li><li><code>systemctl start docker</code> 启动docker服务</li><li><code>docker info</code> 验证安装</li></ul><h2 id="配置docker-hub镜像" tabindex="-1"><a class="header-anchor" href="#配置docker-hub镜像"><span>配置docker hub镜像</span></a></h2><p>1.配置daemon.json</p><p><code>vim /etc/docker/daemon.json</code></p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#C792EA;">registry-mirrors</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">    &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">https://docker.hpcloud.cloud</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">    &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">https://docker.m.daocloud.io</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">    &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">https://docker.unsee.tech</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">    &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">https://docker.1panel.live</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">    &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">http://mirrors.ustc.edu.cn</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">    &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">https://docker.chenby.cn</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">    &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">http://mirror.azure.cn</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">    &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">https://dockerpull.org</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">    &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">https://dockerhub.icu</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">    &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">https://hub.rat.dev</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2.重启服务</p><p><code>systemctl daemon-reload</code></p><p><code>systemctl restart docker</code></p><p>3.查看Registry Mirrors配置项是否生效</p><p><code>docker info</code></p><h2 id="修改镜像存储位置" tabindex="-1"><a class="header-anchor" href="#修改镜像存储位置"><span>修改镜像存储位置</span></a></h2><h3 id="windows" tabindex="-1"><a class="header-anchor" href="#windows"><span>Windows</span></a></h3><p>默认存储位置：C:\\Users\\username\\AppData\\Local\\Docker\\wsl\\</p><p>打开Docker Desktop，依次选择Settings -&gt; Resources -&gt; Advanced，设置Disk image location为新的目录，docker会自动进行设置，并将原有镜像移动到新的目录。</p><h3 id="linux" tabindex="-1"><a class="header-anchor" href="#linux"><span>Linux</span></a></h3><p>默认存储位置： /var/lib/docker/image/</p>`,40)]))}const p=i(l,[["render",t],["__file","index.html.vue"]]),d=JSON.parse('{"path":"/notes/devtools/hhxnlumo/","title":"docker安装","lang":"zh-CN","frontmatter":{"title":"docker安装","createTime":"2024/11/24 15:56:14","permalink":"/notes/devtools/hhxnlumo/"},"headers":[],"readingTime":{"minutes":1.44,"words":432},"git":{"updatedTime":1733057441000,"contributors":[{"name":"ianping","email":"13520322212@163.com","commits":2,"avatar":"https://avatars.githubusercontent.com/ianping?v=4","url":"https://github.com/ianping"}]},"filePathRelative":"notes/devtools/docker安装.md","bulletin":false}');export{p as comp,d as data};

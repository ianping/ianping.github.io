import{_ as i,c as n,b as a,o as e}from"./app-DsGHT65_.js";const l={};function t(p,s){return e(),n("div",null,s[0]||(s[0]=[a(`<p>下载地址：https://www.mongodb.com/try/download/community-edition/releases/archive</p><p>安装教程：https://www.mongodb.com/zh-cn/docs/manual/installation/</p><h2 id="windows" tabindex="-1"><a class="header-anchor" href="#windows"><span>Windows</span></a></h2><p>下载可执行文件安装</p><h2 id="使用docker安装mongodb" tabindex="-1"><a class="header-anchor" href="#使用docker安装mongodb"><span>使用docker安装MongoDB</span></a></h2><p>1.拉取镜像</p><p><code>docker pull mongodb/mongodb-community-server:latest</code></p><p>2.在Host主机创建用于挂载容器volumn的目录</p><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span>mkdir -p /docker/mongodb/conf</span></span>
<span class="line"><span>mkdir -p /docker/mongodb/data</span></span>
<span class="line"><span>mkdir -p /docker/mongodb/log</span></span>
<span class="line"><span>mkdir -p /docker/mongodb/env</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.配置文件</p><p>获取mongodb默认配置文件</p><p><code>docker run -i --rm mongodb/mongodb-community-server:latest cat /etc/mongod.conf.orig &gt; /docker/mongodb/conf/mongod.conf</code></p><p>如下：</p><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span># mongod.conf</span></span>
<span class="line"><span></span></span>
<span class="line"><span># for documentation of all options, see:</span></span>
<span class="line"><span>#   http://docs.mongodb.org/manual/reference/configuration-options/</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Where and how to store data.</span></span>
<span class="line"><span>storage:</span></span>
<span class="line"><span>  dbPath: /var/lib/mongodb</span></span>
<span class="line"><span>#  engine:</span></span>
<span class="line"><span>#  wiredTiger:</span></span>
<span class="line"><span></span></span>
<span class="line"><span># where to write logging data.</span></span>
<span class="line"><span>systemLog:</span></span>
<span class="line"><span>  destination: file</span></span>
<span class="line"><span>  logAppend: true</span></span>
<span class="line"><span>  path: /var/log/mongodb/mongod.log</span></span>
<span class="line"><span></span></span>
<span class="line"><span># network interfaces</span></span>
<span class="line"><span>net:</span></span>
<span class="line"><span>  port: 27017</span></span>
<span class="line"><span>  bindIp: 127.0.0.1</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span># how the process runs</span></span>
<span class="line"><span>processManagement:</span></span>
<span class="line"><span>  timeZoneInfo: /usr/share/zoneinfo</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#security:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#operationProfiling:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#replication:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#sharding:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>## Enterprise-Only Options:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#auditLog:</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>创建2个文本文件，分别保存root用户名和密码：</p><p><code>touch /docker/mongodb/env/ROOT_USERNAME.txt</code></p><p><code>touch /docker/mongodb/env/ROOT_PASSWORD.txt</code></p><p>4.创建容器</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> mongodb</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;">    -p</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> 27017:27017</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;">    -v</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> /docker/mongodb/conf/mongod.conf:/etc/mongod.conf</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;">    -v</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> /docker/mongodb/data/:/var/lib/mongodb/</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;">    -v</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> /docker/mongodb/log/:/var/log/mongodb/</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;">    -v</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> /docker/mongodb/env/ROOT_USERNAME.txt:/etc/MONGODB_INITDB_ROOT_USERNAME_FILE.txt</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;">    -v</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> /docker/mongodb/env/ROOT_PASSWORD.txt:/etc/MONGODB_INITDB_ROOT_PASSWORD_FILE.txt</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;">    -e</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> MONGODB_INITDB_ROOT_USERNAME_FILE=/etc/MONGODB_INITDB_ROOT_USERNAME_FILE.txt</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;">    -e</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> MONGODB_INITDB_ROOT_PASSWORD_FILE=/etc/MONGODB_INITDB_ROOT_PASSWORD_FILE.txt</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">    mongodb/mongodb-community-server:latest</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>参数说明：</p><ul><li><code>-p 27017:27017</code>：端口映射</li><li><code>-v /docker/mongodb/conf/mongod.conf:/etc/mongod.conf</code>：挂载配置文件</li><li><code>-v /docker/mongodb/data/:/var/lib/mongodb/</code>：挂载数据库目录</li><li><code>-v /docker/mongodb/log/:/var/log/mongodb/</code>：挂载日志目录</li><li><code>-v /docker/mongodb/env/ROOT_USERNAME.txt:/etc/MONGODB_INITDB_ROOT_USERNAME_FILE.txt</code>：挂载root用户名文件</li><li><code>-v /docker/mongodb/env/ROOT_PASSWORD.txt:/etc/MONGODB_INITDB_ROOT_PASSWORD_FILE.txt</code>：挂载root密码文件</li><li><code>-e MONGODB_INITDB_ROOT_USERNAME_FILE=/etc/MONGODB_INITDB_ROOT_USERNAME_FILE.txt</code>：配置环境变量，指定root用户名文件路径</li><li><code>-e MONGODB_INITDB_ROOT_PASSWORD_FILE=/etc/MONGODB_INITDB_ROOT_PASSWORD_FILE.txt</code>：配置环境变量，指定root密码文件路径</li></ul><p>5.启动容器</p><p><code>docker start mongodb</code></p><p>6.验证</p><p>进入容器</p><p><code>docker exec -it mongodb bash</code></p><p>查看MongoDB版本(v7.0.11)</p><p><code>mongod --version</code></p><p>连接mongodb服务器</p><p><code>mongosh --port 27017</code></p><p>执行命令：</p><div class="language-javascript line-numbers-mode" data-ext="javascript" data-title="javascript"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">db</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">runCommand</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">   {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F07178;">      hello</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>返回描述mongod部署信息的json文档</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">{</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#EEFFFF;--shiki-dark-font-style:inherit;">  isWritablePrimary</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#EEFFFF;--shiki-dark-font-style:inherit;">  topologyVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#EEFFFF;--shiki-dark-font-style:inherit;">    processId</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#EEFFFF;--shiki-dark-font-style:inherit;"> ObjectId(&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">6650</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#EEFFFF;--shiki-dark-font-style:inherit;">af</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">927</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#EEFFFF;--shiki-dark-font-style:inherit;">ff</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">3e49425</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#EEFFFF;--shiki-dark-font-style:inherit;">bcb</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">09</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#EEFFFF;--shiki-dark-font-style:inherit;">b&#39;)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#EEFFFF;--shiki-dark-font-style:inherit;">    counter</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#EEFFFF;--shiki-dark-font-style:inherit;"> Long(&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">0</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#EEFFFF;--shiki-dark-font-style:inherit;">&#39;)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">  },</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#EEFFFF;--shiki-dark-font-style:inherit;">  maxBsonObjectSize</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 16777216</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#EEFFFF;--shiki-dark-font-style:inherit;">  maxMessageSizeBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 48000000</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#EEFFFF;--shiki-dark-font-style:inherit;">  maxWriteBatchSize</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 100000</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#EEFFFF;--shiki-dark-font-style:inherit;">  localTime</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#EEFFFF;--shiki-dark-font-style:inherit;"> ISODate(&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">2024-05-24</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#EEFFFF;--shiki-dark-font-style:inherit;">T</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">15</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#EEFFFF;--shiki-dark-font-style:inherit;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">20</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#EEFFFF;--shiki-dark-font-style:inherit;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">24.010</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#EEFFFF;--shiki-dark-font-style:inherit;">Z&#39;)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#EEFFFF;--shiki-dark-font-style:inherit;">  logicalSessionTimeoutMinutes</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 30</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#EEFFFF;--shiki-dark-font-style:inherit;">  connectionId</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#EEFFFF;--shiki-dark-font-style:inherit;">  minWireVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#EEFFFF;--shiki-dark-font-style:inherit;">  maxWireVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 21</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#EEFFFF;--shiki-dark-font-style:inherit;">  readOnly</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#EEFFFF;--shiki-dark-font-style:inherit;">  ok</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,34)]))}const h=i(l,[["render",t],["__file","index.html.vue"]]),k=JSON.parse('{"path":"/notes/database/cphjfra6/","title":"MongoDB安装","lang":"zh-CN","frontmatter":{"title":"MongoDB安装","createTime":"2024/11/24 15:56:14","permalink":"/notes/database/cphjfra6/"},"headers":[],"readingTime":{"minutes":1.38,"words":414},"git":{},"filePathRelative":"notes/database/7.mongodb/1.MongoDB安装.md","bulletin":false}');export{h as comp,k as data};

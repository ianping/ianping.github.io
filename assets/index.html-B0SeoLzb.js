import{_ as i,c as a,b as n,o as h}from"./app-DsGHT65_.js";const l={};function t(k,s){return h(),a("div",null,s[0]||(s[0]=[n(`<h1 id="sql数据库和表" tabindex="-1"><a class="header-anchor" href="#sql数据库和表"><span>sql数据库和表</span></a></h1><div class="hint-container tip"><p class="hint-container-title">提示</p><p>数据库：PostgreSQL 16.1</p></div><h2 id="数据库" tabindex="-1"><a class="header-anchor" href="#数据库"><span>数据库</span></a></h2><h3 id="创建数据库" tabindex="-1"><a class="header-anchor" href="#创建数据库"><span>创建数据库</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> DATABASE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> library</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="删除数据库" tabindex="-1"><a class="header-anchor" href="#删除数据库"><span>删除数据库</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">DROP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> DATABASE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> library;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="数据表" tabindex="-1"><a class="header-anchor" href="#数据表"><span>数据表</span></a></h2><h3 id="创建表" tabindex="-1"><a class="header-anchor" href="#创建表"><span>创建表</span></a></h3><p>使用<code>CREATE TABLE</code>语句创建表，语法如下：</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">表名</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">(</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">	&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">列名1</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">数据类型</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">列约束</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">    &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">列名1</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">数据类型</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">列约束</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">    ...</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">    &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">表约束1</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">    &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">表约束2</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">    ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以图书馆管理系统为例（简化版）：</p><p>图书表</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">t_book</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">&quot; (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> char</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">13</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">)  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">title</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">)  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">author</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">) ,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">price</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> numeric</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">publisher</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">) ,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">publish_date</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> date</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">create_at</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> date</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> CURRENT_DATE,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">update_at</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> date</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> CURRENT_DATE,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  CONSTRAINT</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">t_book_pkey</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  CONSTRAINT</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">title_ukey</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> UNIQUE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">title</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>读者表</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">t_reader</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">&quot; (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> char</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">)  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">id_card</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> char</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">18</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">) ,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">name</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">)  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">gender</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">) ,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">address_id</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> int4,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">create_at</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> date</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> CURRENT_DATE,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">update_at</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> date</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> CURRENT_DATE,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  CONSTRAINT</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">t_reader_pkey</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  CONSTRAINT</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">address_id_fkey</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">address_id</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">t_address</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">ON DELETE CASCADE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> UPDATE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> CASCADE,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  CONSTRAINT</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">address_id_ukey</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> UNIQUE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">address_id</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>地址表</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">t_address</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">&quot; (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> int4 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">address</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">150</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  CONSTRAINT</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">t_address_pkey</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>借阅记录表</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">t_borrow_record</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">&quot; (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">reader_id</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> char</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">book_id</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> char</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">13</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">borrow_at</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> date</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> CURRENT_DATE,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">return_at</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> date</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  CONSTRAINT</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">t_borrow_record_pkey</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">reader_id</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">book_id</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="更新表" tabindex="-1"><a class="header-anchor" href="#更新表"><span>更新表</span></a></h3><p>使用<code>ALTER TABLE</code>语句更新表。</p><h4 id="增加列" tabindex="-1"><a class="header-anchor" href="#增加列"><span>增加列</span></a></h4><p>更新读者表，增加1列，表示最大可借图书数量</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">ALTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> t_reader </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">ADD</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> COLUMN max_borrowable int2;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">/*增加列，同时添加列约束*/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">ALTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> t_reader </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">ADD</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> COLUMN max_borrowable int2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="删除列" tabindex="-1"><a class="header-anchor" href="#删除列"><span>删除列</span></a></h4><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">ALTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> t_reader </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">DROP</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> COLUMN max_borrowable;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="添加约束" tabindex="-1"><a class="header-anchor" href="#添加约束"><span>添加约束</span></a></h4><p>给读者表的address_id列添加外键约束，引用地址表的id列，级联删除，级联更新</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">ALTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> t_reader</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">ADD</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> CONSTRAINT</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">address_id_fkey</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">address_id</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">t_address</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">ON DELETE CASCADE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> UPDATE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> CASCADE;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="删除表" tabindex="-1"><a class="header-anchor" href="#删除表"><span>删除表</span></a></h3><p>使用<code>DROP TABLE</code>语句删除表</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">DROP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> t_address;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>如果表中存在被引用的列（被其它表外键引用），需要添加<code>CASCADE</code>关键字，会将其它表中的引用删除</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">DROP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> t_address CASCADE;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="约束" tabindex="-1"><a class="header-anchor" href="#约束"><span>约束</span></a></h2><h3 id="主键约束" tabindex="-1"><a class="header-anchor" href="#主键约束"><span>主键约束</span></a></h3><p>使用<code>PRIMARY KEY</code>指定主键，需要在定义表的时候设置主键。</p><p>主键约束名通常为：<em>表名_pkey</em></p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">表名</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">  	&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">数据类型</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">	...</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    CONSTRAINT</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">主键约束名</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="外键约束" tabindex="-1"><a class="header-anchor" href="#外键约束"><span>外键约束</span></a></h3><p>使用<code>FOREIGN KEY</code>指定外键约束。</p><p>外键既可以在定义表时设置，也可使用<code>ALTER TABLE</code>语句设置。</p><p>外键约束名通常为：<em>列名_fkey</em></p><p>定义表时设置外键约束</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">表名</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">    &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">外键列名</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">数据类型</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">	...</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    CONSTRAINT</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">外键约束名</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">外键列名</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">关联表名</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">关联表ID</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">ON DELETE CASCADE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> UPDATE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> CASCADE,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用<code>ALTER TABLE</code>语句设置外键</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">ALTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">表名</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">ADD</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> CONSTRAINT</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">外键约束名</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">外键列名</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">关联表名</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">关联表ID</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">ON DELETE CASCADE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> UPDATE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> CASCADE;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="唯一键约束" tabindex="-1"><a class="header-anchor" href="#唯一键约束"><span>唯一键约束</span></a></h3><p>使用<code>UNIQU</code>设置唯一键约束。</p><p>唯一键约束既可以在定义表的时候设置，也可以使用<code>ALTER TABLE</code>语句设置。</p><p>唯一键约束名通常为：<em>列名_ukey</em></p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">ALTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">表名</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">ADD</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> CONSTRAINT</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">唯一键约束名</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> UNIQUE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (列名);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="null约束" tabindex="-1"><a class="header-anchor" href="#null约束"><span>Null约束</span></a></h3><p>使用<code>NULL</code>或<code>NOT NULL</code>设置Null约束。列默认具有NULL约束</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">表名</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">  &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">列名1</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">数据类型</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">  &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">列名2</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">数据类型</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="默认值约束" tabindex="-1"><a class="header-anchor" href="#默认值约束"><span>默认值约束</span></a></h3><p>使用<code>DEFAULT</code>设置默认值约束</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">表名</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">	&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">列名</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">数据类型</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">默认值</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">    ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="检查约束" tabindex="-1"><a class="header-anchor" href="#检查约束"><span>检查约束</span></a></h3><p>使用<code>CHECK(条件表达式)</code>设置检查约束，限制某一列必须满足给定的条件。</p><p>例如：对读者表中的max_borrowable列添加约束，限制值范围为0-10</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">ALTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">t_reader</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">ADD</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> CONSTRAINT</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">max_borrowable_check</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> CHECK</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (max_borrowable </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">BETWEEN</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> AND</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div>`,63)]))}const p=i(l,[["render",t],["__file","index.html.vue"]]),F=JSON.parse('{"path":"/notes/database/pqmd808e/","title":"sql数据库和表","lang":"zh-CN","frontmatter":{"title":"sql数据库和表","createTime":"2024/11/24 15:56:14","permalink":"/notes/database/pqmd808e/"},"headers":[],"readingTime":{"minutes":2.9,"words":869},"git":{"updatedTime":1733057441000,"contributors":[{"name":"ianping","email":"13520322212@163.com","commits":2,"avatar":"https://avatars.githubusercontent.com/ianping?v=4","url":"https://github.com/ianping"}]},"filePathRelative":"notes/database/1.sql/sql数据库和表.md","bulletin":false}');export{p as comp,F as data};
